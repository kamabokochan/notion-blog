
動画見ながら要点だけメモっておくだけのもの


## ユーザ体験の指標

- Core Web Vitals
	- LCP
		- 2.5秒以内にロードを目指すことが推奨されている

			![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-07_22.21.43.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/75d22e30-986d-42e0-a94e-27daf4b41b8c/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-07_22.21.43.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013442Z&X-Amz-Expires=3600&X-Amz-Signature=7f1cd1670483258380d33f3b855ec58b207d70e27aef093af6e1e19f1ac40754&X-Amz-SignedHeaders=host&x-id=GetObject)

	- FCP
		- 1.8秒以内のロードが推奨されている

			![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-07_22.22.48.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/ce4fd827-edff-4a31-8fee-2e55308fec60/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-07_22.22.48.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013442Z&X-Amz-Expires=3600&X-Amz-Signature=036545c4e80c746532d1d40ebf6fe0ca8622d3d68a1229d6974ad1a35a625048&X-Amz-SignedHeaders=host&x-id=GetObject)

	- FID
		- 100ms以下を目指す

			![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-07_22.23.43.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/3e4c566b-0b34-4a39-8720-9012d128dbdd/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-07_22.23.43.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013445Z&X-Amz-Expires=3600&X-Amz-Signature=d7b3914fc9690aa81e2ba1b834761bf88e33e754259c26f00771b1e7067a4be1&X-Amz-SignedHeaders=host&x-id=GetObject)

- 開発者体験の指標

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-07_22.31.22.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/f0ad49d8-b343-4166-abd6-6ac7067b9887/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-07_22.31.22.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013445Z&X-Amz-Expires=3600&X-Amz-Signature=9706675a6e40e492fc7dfe32f068904726a2f20174f755ecf658546cb3585112&X-Amz-SignedHeaders=host&x-id=GetObject)

- ユーザー体験と開発者体験から見るフロントエンドのレンダリングパターン

## レンダリングパターン


### CSR（Client Side Rendering）


![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.19.47.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/2ad57243-c41a-4c90-8eb0-ce5c2866bab1/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.19.47.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013441Z&X-Amz-Expires=3600&X-Amz-Signature=8897f95e604c1057dd73b9f1ab00eed4595120a44cdc49027b3bfdf169c460de&X-Amz-SignedHeaders=host&x-id=GetObject)

- `<div id=”root”></div>` のみのHTMLが最初にダウンロードされる
	- JSでページを構成する
	- デメリット
		- 最初にJSでページを構成するまで、ユーザに何もないページを提供することになる
			- サーバーコスト：低
			- クライアントコスト：高
	- JSのサイズが多くなり、ユーザのデバイスが最新ではない傾向から、パフォーマンスの最適化が求められる
		- Code SplittingやLazy Loadによるユーザ体験の向上
			- 必要最低限のJSのみ最初に読み込んでおき、優先度の低いものは遅延読み込みをさせることで、ユーザに必要最低限の機能を最初に提供しておく
				- 完成度(80%) → ユーザーが基本的に利用に支障がない → ユーザに使用してもらいつつ、裏で100%になるようにJSのDLをコントロールする
- AWSアーキテクチャの例
	- CloudFront + S3

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.30.53.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/80afdaa5-2a09-4fb7-9b5e-9d6040b494fa/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.30.53.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013448Z&X-Amz-Expires=3600&X-Amz-Signature=c31948ef1b416d9bc9f95457064000e9ca85602e1b5a15ff01c3dd9fbd27049e&X-Amz-SignedHeaders=host&x-id=GetObject)

	- キャッシュ
		- ユーザのブラウザ = Private Cache
		- CDN = Public Cache
		- オリジンのキャッシュコントロールによってコントロールできる

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.31.39.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/cae49381-5ec9-4579-99d5-a5e2699409cb/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.31.39.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013448Z&X-Amz-Expires=3600&X-Amz-Signature=50e11776abd4ae877296b7796b595b5e1c43c8ec22f5a15080fe3047f309a331&X-Amz-SignedHeaders=host&x-id=GetObject)

		- webpackにより、ハッシュ値を名前に設定することでキャッシュをクリアする方法が一般的
		- 合わせてデプロイ際には、CDNのキャッシュもクリアする

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.34.28.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/cfe36d40-65f9-40b0-bd91-c714e476db99/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.34.28.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013448Z&X-Amz-Expires=3600&X-Amz-Signature=5a06a4d1ee90fa5ada92b4e181c580065709a939b6a7e9978d4b3f1c2193dc99&X-Amz-SignedHeaders=host&x-id=GetObject)

	- Client Side Routingの制御

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.41.28.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/0636a317-4925-4e64-ba39-0e077a8c96eb/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.41.28.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013449Z&X-Amz-Expires=3600&X-Amz-Signature=62ad9ba1e799c16e8544ae5dcd178f968fe09fcfda7db3e73553059ffc091775&X-Amz-SignedHeaders=host&x-id=GetObject)

	- CloudFront Functionによる制御
		- CloudFrontでは、2つのレイヤーが存在しており、よりユーザに近いEdge Locationで制御することが推奨される

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.42.09.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/66988652-990b-4bd8-b553-aaecb9dcfd4c/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.42.09.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013450Z&X-Amz-Expires=3600&X-Amz-Signature=3a3913245a66b1b1f0e81747a257e5b156737d87d323ae16ba22012e0e59b848&X-Amz-SignedHeaders=host&x-id=GetObject)


### SSR （Server Side Rendering）

- Hydration
	- 単なる文字列としてサーバー側から返却されるHTMLにイベントなどをアタッチし、HTMLを完成させる

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.46.50.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/fe009ceb-3a80-4310-a190-9313ad0821b1/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.46.50.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013450Z&X-Amz-Expires=3600&X-Amz-Signature=2b391837616bdd400be9a7214b1646f7530fb02a169e72c663494d47a50a88f1&X-Amz-SignedHeaders=host&x-id=GetObject)


		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.46.30.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/88790561-ccdc-47b1-beac-886c1c0d78d0/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.46.30.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013450Z&X-Amz-Expires=3600&X-Amz-Signature=742723587784522b93d5c399a5c400e16a6c3e0689ab37bb594bb0fd4c6ccfc5&X-Amz-SignedHeaders=host&x-id=GetObject)

- AWS アーキテクチャ
	- SSRするサーバーとデータソース
		- サーバー側でHTMLを構築する際にAPIを介したり、直接DBにリクエストする

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.53.50.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/0a351321-aa65-4bbf-8965-f21dbdb1017f/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.53.50.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013451Z&X-Amz-Expires=3600&X-Amz-Signature=c7cf7934a14d3a4e47208323c95398cd79772d1f02f9e1a54ccfe2468dc04dcf&X-Amz-SignedHeaders=host&x-id=GetObject)

	- Lambda Edgeを利用するパターン

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.56.01.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/4f597d78-25d8-478f-8765-82638aa3d924/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.56.01.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013451Z&X-Amz-Expires=3600&X-Amz-Signature=77fa83c218f378b097855768789c866153d9c8dea440eb281eab978c9c749379&X-Amz-SignedHeaders=host&x-id=GetObject)

- SSRのレンダリングプロセス
	- FCPは短縮できる（画面の最初の描画は早い）
	- TTIは、CSRとほぼ変わらない（ユーザが利用できるようになるまでの時間は変わらない）
	- 画面は表示されているのに、ユーザが操作できないといった体験が生まれる可能性があることに注意

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.58.01.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/23b2817f-51c1-484e-a1c4-3e6850499ca7/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.58.01.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013451Z&X-Amz-Expires=3600&X-Amz-Signature=a0fb5936fcb182e5f9334b918bfe9376cdf2fb81d77b96c064f8130edc6370e2&X-Amz-SignedHeaders=host&x-id=GetObject)


	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.59.19.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/b27b2cdc-bc60-44dc-8c83-216aae6a83c9/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_0.59.19.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013451Z&X-Amz-Expires=3600&X-Amz-Signature=4ad5175f832deab648441ebc8bcd1458fda0c4d354520331812a85ce1c63707c&X-Amz-SignedHeaders=host&x-id=GetObject)

- SSRの課題

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.00.30.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/f508d3b1-1428-406a-a352-9c6352c5beea/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.00.30.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013451Z&X-Amz-Expires=3600&X-Amz-Signature=9465b660579b63352644ea4c8bc30835f68688d1b71cc0302c139642bdf2bb49&X-Amz-SignedHeaders=host&x-id=GetObject)

	- これらを解決するStreaming HTMLやSelective Hydration
	- Streaming HTML
		- データフェッチが終わったところから、HTMLを部分的に返却していく
			- FCPやTTIを早めることができる

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.01.51.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/4b020a76-dbaa-4e2b-b20d-3363caa4f814/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.01.51.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013452Z&X-Amz-Expires=3600&X-Amz-Signature=da4eab4c60b77f0ff3115f25c6158a36ba407ed9878f43b01598d36f49356b60&X-Amz-SignedHeaders=host&x-id=GetObject)

	- Selective Hydration
		- ReactのSuspenseなど

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.36.16.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/a4e946ea-1292-4138-8933-a4fd97bd59bf/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.36.16.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013452Z&X-Amz-Expires=3600&X-Amz-Signature=ba13d320e5469eecd29f697c268a424d4e2f614ea5b26036cf7d2b87b213923e&X-Amz-SignedHeaders=host&x-id=GetObject)


### SSG（Static Site Genetation）

- prerenderring
- SSRは、ユーザからのリクエストに応じてHTMLを生成する
- SSGは、事前にすべてのページを生成する
	- サーバーサイドでのレンダリングやフェッチが不要になり、ユーザに早く届けることができる
- AWS アーキテクチャ
	- ビルドしたHTMLをS3へ配置

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.42.37.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/95df6ff5-9980-4a68-b7a5-48977a9aa5f3/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.42.37.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013452Z&X-Amz-Expires=3600&X-Amz-Signature=f99dca459812e465d3dfa05dc4620a64ff5861455ba0a2fef6ac10e826dfd43b&X-Amz-SignedHeaders=host&x-id=GetObject)

- SSGの得意領域
	- 表示速度に特化

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.43.35.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/9df8272a-e1b4-4ed4-8e95-5664e132cdc8/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.43.35.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013453Z&X-Amz-Expires=3600&X-Amz-Signature=67612d72e503b36ab1c0b2c5e1e98963d7a292b66463271ff74b69849b7583a6&X-Amz-SignedHeaders=host&x-id=GetObject)

	- 注意点

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.44.36.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/41438ace-e9bb-4591-bac1-0e33d3444116/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.44.36.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013453Z&X-Amz-Expires=3600&X-Amz-Signature=694ef0caa07dca8eacc54475937b7249bacf601b658c6b00a739f917d005ebb1&X-Amz-SignedHeaders=host&x-id=GetObject)


### ISR（Incremental Static Regeneration）

- ページに優先度をつけて、必要な分だけ生成することでSSGのビルドにかかる時間という課題を解決する

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.49.58.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/0ccb84f1-ffb3-4842-9da3-3795d5e52662/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.49.58.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013453Z&X-Amz-Expires=3600&X-Amz-Signature=5a6d38c77467e207f246f947ddcb5b6bbb84d3b140763213ac72e7b2b122544d&X-Amz-SignedHeaders=host&x-id=GetObject)

- Cache
	- 60秒ごとのrevalidate
	- オンデマンド revaidationも選択肢にある

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.51.41.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/9813b124-73b0-4e5d-ab7c-e6623c86113d/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.51.41.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013453Z&X-Amz-Expires=3600&X-Amz-Signature=27dd8c77939fbc99576e1a25da92a3b1e0c3916c37556dfb9873031146f191fa&X-Amz-SignedHeaders=host&x-id=GetObject)


## Next.jsのホスティングパターン


![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.53.44.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/0703b173-ca6d-4d47-910c-a6c3e10955d0/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.53.44.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013441Z&X-Amz-Expires=3600&X-Amz-Signature=d8b68547972c1e1122adb21deec7bd8a304a3e35b80718e3e091659d4fb689b7&X-Amz-SignedHeaders=host&x-id=GetObject)

- Serverless
	- Next12までの一部の機能をサポートしていることやLambda@Edgeを利用している点への注意

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.54.33.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/53616558-6fde-458d-81a5-be31feb648a1/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.54.33.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013453Z&X-Amz-Expires=3600&X-Amz-Signature=2365227d7ad25025817e741fda65bae892c74598b67f44c19ac4a08cb19d185c&X-Amz-SignedHeaders=host&x-id=GetObject)

	- Serverless Next.jsの開発は停止している

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.56.18.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/a7bb99ef-973a-4e9d-9b69-259b6beb1e93/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.56.18.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013453Z&X-Amz-Expires=3600&X-Amz-Signature=f21bb79f5929d4fb930d008e6c201cd8a172a7060fa2001f6a158de23101f9a6&X-Amz-SignedHeaders=host&x-id=GetObject)

	- Open Nextという方法

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.58.00.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/70c12591-f21b-4713-ae9c-50b4ae39225a/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.58.00.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013453Z&X-Amz-Expires=3600&X-Amz-Signature=b680f35f79d8020729f1f0ff478c5df788eb9b40d07b180f081f8ec70404ef9e&X-Amz-SignedHeaders=host&x-id=GetObject)

	- Lambda アダプター

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.59.17.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/1f53d93c-eeee-4183-85be-10373643a899/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.59.17.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013454Z&X-Amz-Expires=3600&X-Amz-Signature=14e626ae157c252ef1077fd16e33fb0bf5a402aefc708b25d60e1075c2b98cb7&X-Amz-SignedHeaders=host&x-id=GetObject)


		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.59.31.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/d23fce06-e5d6-47cf-9e43-5d7e87bb8516/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_1.59.31.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013454Z&X-Amz-Expires=3600&X-Amz-Signature=1c755451b155ea406686363683855328379f764dff5f09ec9614aa8032c035da&X-Amz-SignedHeaders=host&x-id=GetObject)

		- 

		![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_2.02.07.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/ec42f0e2-e0ca-4956-a993-3af9efce370b/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_2.02.07.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013454Z&X-Amz-Expires=3600&X-Amz-Signature=6ea31302f95099dafff8ec2ad6930fc266ecd376bda564b8ad8c3c64f4ebb9bb&X-Amz-SignedHeaders=host&x-id=GetObject)

- Amplify Hosting
	- シンプルに利用できるが、すべての機能をサポートしていない

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_2.05.04.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/3d112b7c-5549-4a2b-af49-82831e84a66a/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_2.05.04.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013454Z&X-Amz-Expires=3600&X-Amz-Signature=0decab3aa137373648fec47814d2790c07a152c5412d17dca3e45b84e2e9c5b3&X-Amz-SignedHeaders=host&x-id=GetObject)

- Computing
	- 開発コストは上がるが、すべての機能を利用できる

	![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_2.05.49.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/f48d6e33-61cf-4591-b8a5-70fca82fa829/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_2.05.49.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013454Z&X-Amz-Expires=3600&X-Amz-Signature=3a42f3caaede80ab74097c23412867de463943f981e968d4d7117b86d676e1a4&X-Amz-SignedHeaders=host&x-id=GetObject)


まとめ


![%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_2.06.27.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/521bfabc-4589-4023-af1d-c7e9f5922659/d21cb858-e015-4bf5-aeab-50c45370da09/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2024-05-12_2.06.27.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240528T013441Z&X-Amz-Expires=3600&X-Amz-Signature=6eb1074af5836c746d3024018264b5e3e07dd6852f60df48a0b0f39ee0898b1a&X-Amz-SignedHeaders=host&x-id=GetObject)


おまけ


[video](https://www.youtube.com/watch?v=R2YQG5gQMXo)


メモ

- SSR
	- SSRはお客様でトラブルが発生した際に問題の切り分けがしやすい
		- CSRはお客様の環境でwebページを構築してしまうので、お客様環境固有の問題なのか、サービス側が送信したものに不具合があったか分かりにくい
		- SSRの場合は、提供しているものをサーバー側で作っているのでバックアップをとって実際にお客様に渡しているものを把握できる
	- JSが動かない環境でも目的を果たせる（かもしれない）
		- CSRはJSが動かないとほとんど何もできない
		- SSRはサーバー側でHTMLを構築するのでJSが機能しないお客様のフォローもできる
